<!DOCTYPE html>
<html>
<body>
<h1>JavaScript Fetch API</h1>
<h2>The fetch() Method</h2>
<p id="demo">Fetch a file to change this text.</p>

<script>
getText("https://iot-vertical-farming-40e8a-default-rtdb.firebaseio.com/sensor_value_history/branch1.json");

async function getText(file) {
  let myObject = await fetch(file);
  let myText = await myObject.text();
  document.getElementById("demo").innerHTML = myText;
  let x= await document.getElementById("demo").innerHTML ;
  let  obj = await JSON.parse(x);
 
//   await console.log(obj);
  
  
  const asyncUppercase = item =>
   new Promise(resolve =>
    setTimeout(
      () => resolve(ar1.push(item.air_humidity)),
      Math.floor(Math.random() * 1000)
    )
  );

  const uppercaseItems = async () => {
  const items = await JSON.parse(x);
  await items.forEach(async item => {
    const uppercaseItem = await asyncUppercase(item);
    console.log(uppercaseItem);
  });
  


  console.log('Items processed');
};
 uppercaseItems()
}
</script>

</body>
</html>
